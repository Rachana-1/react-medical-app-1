{"ast":null,"code":"import _regeneratorRuntime from \"D:\\\\Downloads\\\\Test HTML\\\\testgenerator\\\\Test_app\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _asyncToGenerator from \"D:\\\\Downloads\\\\Test HTML\\\\testgenerator\\\\Test_app\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"D:\\\\Downloads\\\\Test HTML\\\\testgenerator\\\\Test_app\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"D:\\\\Downloads\\\\Test HTML\\\\testgenerator\\\\Test_app\\\\src\\\\containers\\\\Profile\\\\profile.container.js\";\n\nimport React, { Fragment, useState } from 'react';\nimport SolidAuth from 'solid-auth-client';\nimport { useTranslation } from 'react-i18next';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { FormModel } from '@inrupt/solid-react-components';\nimport { successToaster, errorToaster, languageHelper } from \"../../utils\";\nimport { Loader } from \"../../components/Utils\";\nimport { Header, ProfileContainer, ProfileWrapper, AutoSaveNotification, WebId } from \"./profile.style\";\nimport { Label, Input, Button } from \"../TextEditor/text-editor.style\";\nimport { FormWrapper } from \"../FormModel/form-model.style\";\nimport { Image } from \"./components\";\nimport { AutoSaveSpinner } from \"../../components\";\nvar defaultProfilePhoto = '/img/icon/empty-profile.svg';\nvar language = languageHelper.getLanguageCode();\n/**\n * We are using ldflex to fetch profile data from a solid pod.\n * ldflex libary is using json-LD for this reason you will see async calls\n * when we want to get a field value, why ? becuase they are expanded the data\n * this means the result will have a better format to read on Javascript.\n * for more information please go to: https://github.com/solid/query-ldflex\n */\n\nvar Profile = function Profile(_ref) {\n  var webId = _ref.webId;\n\n  var _useTranslation = useTranslation(),\n      t = _useTranslation.t;\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      isLoading = _useState2[0],\n      setIsLoading = _useState2[1];\n\n  var _useState3 = useState(''),\n      _useState4 = _slicedToArray(_useState3, 2),\n      url = _useState4[0],\n      setUrl = _useState4[1];\n\n  var _onError = function onError(e) {\n    if (e.message.toString().indexOf('Validation failed') < 0) {\n      errorToaster(t('formLanguage.renderer.formNotLoaded'), t('notifications.error'), {\n        label: t('errorFormRender.link.label'),\n        href: t('errorFormRender.link.href')\n      });\n      setIsLoading(false);\n    }\n  };\n\n  var _onDelete = function onDelete() {\n    successToaster(t('formLanguage.renderer.fieldDeleted'), t('notifications.success'));\n  };\n\n  var _onAddNewField = function onAddNewField() {\n    successToaster(t('formLanguage.renderer.fieldAdded'), t('notifications.success'));\n  };\n\n  function handleUrlChange(event) {\n    event.preventDefault();\n    setUrl(event.target.value);\n  }\n\n  function handleSave(_x) {\n    return _handleSave.apply(this, arguments);\n  }\n\n  function _handleSave() {\n    _handleSave = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(event) {\n      var result, doc;\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              event.preventDefault();\n              _context3.next = 3;\n              return SolidAuth.fetch(url, {\n                method: 'PUT',\n                body: 'https://ritvik18.solid.community/public/profile.ttl#',\n                headers: {\n                  'Content-Type': 'rdf'\n                }\n              });\n\n            case 3:\n              result = _context3.sent;\n\n              if (result.ok) {\n                successToaster(t('notifications.saved'));\n              } else if (result.ok === false) {\n                errorToaster(t('notifications.errorSaving'));\n              }\n\n              event.preventDefault();\n              doc = SolidAuth.fetch(url);\n              doc.then( /*#__PURE__*/function () {\n                var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(response) {\n                  return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n                    while (1) {\n                      switch (_context2.prev = _context2.next) {\n                        case 0:\n                        case \"end\":\n                          return _context2.stop();\n                      }\n                    }\n                  }, _callee2);\n                }));\n\n                return function (_x3) {\n                  return _ref3.apply(this, arguments);\n                };\n              }()).catch(function () {\n                errorToaster(t('notifications.errorFetching'));\n              });\n\n            case 8:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3);\n    }));\n    return _handleSave.apply(this, arguments);\n  }\n\n  function handleLoad(event) {\n    event.preventDefault();\n    var doc = SolidAuth.fetch(url);\n    doc.then( /*#__PURE__*/function () {\n      var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(response) {\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      return function (_x2) {\n        return _ref2.apply(this, arguments);\n      };\n    }()).catch(function () {\n      errorToaster(t('notifications.errorFetching'));\n    });\n  }\n\n  return /*#__PURE__*/React.createElement(ProfileWrapper, {\n    \"data-testid\": \"profile-component\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(ProfileContainer, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 7\n    }\n  }, webId && /*#__PURE__*/React.createElement(Fragment, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Header, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Image, Object.assign({\n    webId: webId,\n    defaultProfilePhoto: defaultProfilePhoto\n  }, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 15\n    }\n  }))), /*#__PURE__*/React.createElement(AutoSaveNotification, {\n    className: \"banner-wrap--warning banner\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"banner-wrap__content\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    className: \"icon fa fa-exclamation-circle\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 17\n    }\n  }), t('profile.autosaveNotification'))), /*#__PURE__*/React.createElement(WebId, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n    icon: \"id-card\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(\"a\", {\n    href: webId,\n    target: \"_blank\",\n    rel: \"noopener noreferrer\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 15\n    }\n  }, webId)), /*#__PURE__*/React.createElement(FormWrapper, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Label, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 13\n    }\n  }, t('editor.url'), \":\", /*#__PURE__*/React.createElement(Input, {\n    type: \"text\",\n    size: \"200\",\n    value: url,\n    onChange: handleUrlChange,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 38\n    }\n  })), /*#__PURE__*/React.createElement(Button, {\n    className: \"ids-link-filled ids-link-filled--primary button\",\n    onClick: handleLoad,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 13\n    }\n  }, t('editor.load')), /*#__PURE__*/React.createElement(Button, {\n    className: \"ids-link-filled ids-link-filled--secondary button\",\n    onClick: handleSave,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 11\n    }\n  }, t('editor.save')), /*#__PURE__*/React.createElement(FormModel, Object.assign({\n    modelSource: 'https://ritvik18.solid.community/public/profile.ttl#formRoot',\n    dataSource: url,\n    viewer: false,\n    onInit: function onInit() {\n      setIsLoading(true);\n    },\n    onLoaded: function onLoaded() {\n      setIsLoading(false);\n    },\n    onSuccess: function onSuccess() {},\n    onSave: function onSave() {},\n    onError: function onError(error) {\n      _onError(error);\n    },\n    onAddNewField: function onAddNewField(response) {\n      return _onAddNewField(response);\n    },\n    onDelete: function onDelete(response) {\n      return _onDelete(response);\n    },\n    options: {\n      theme: {\n        inputText: 'input-wrap',\n        inputCheckbox: 'sdk-checkbox checkbox',\n        form: 'inrupt-sdk-form',\n        childGroup: 'inrupt-form-group',\n        groupField: 'group-wrapper',\n        multipleField: 'multiple-wrapper'\n      },\n      autosave: true,\n      autosaveIndicator: AutoSaveSpinner,\n      language: language\n    }\n  }, {\n    liveUpdate: true,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 15\n    }\n  })))), isLoading && /*#__PURE__*/React.createElement(Loader, {\n    absolute: true,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 23\n    }\n  })));\n};\n\nexport default Profile;","map":{"version":3,"sources":["D:/Downloads/Test HTML/testgenerator/Test_app/src/containers/Profile/profile.container.js"],"names":["React","Fragment","useState","SolidAuth","useTranslation","FontAwesomeIcon","FormModel","successToaster","errorToaster","languageHelper","Loader","Header","ProfileContainer","ProfileWrapper","AutoSaveNotification","WebId","Label","Input","Button","FormWrapper","Image","AutoSaveSpinner","defaultProfilePhoto","language","getLanguageCode","Profile","webId","t","isLoading","setIsLoading","url","setUrl","onError","e","message","toString","indexOf","label","href","onDelete","onAddNewField","handleUrlChange","event","preventDefault","target","value","handleSave","fetch","method","body","headers","result","ok","doc","then","response","catch","handleLoad","modelSource","dataSource","viewer","onInit","onLoaded","onSuccess","onSave","error","options","theme","inputText","inputCheckbox","form","childGroup","groupField","multipleField","autosave","autosaveIndicator"],"mappings":"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","sourcesContent":["import React, { Fragment, useState } from 'react';\nimport SolidAuth from 'solid-auth-client';\nimport { useTranslation } from 'react-i18next';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { FormModel } from '@inrupt/solid-react-components';\nimport { successToaster, errorToaster, languageHelper } from '@utils';\nimport { Loader } from '@util-components';\nimport {\n  Header,\n  ProfileContainer,\n  ProfileWrapper,\n  AutoSaveNotification,\n  WebId\n} from './profile.style';\nimport {Label, Input, Button} from '../TextEditor/text-editor.style';\nimport { FormWrapper } from '../FormModel/form-model.style';\nimport { Image } from './components';\nimport { AutoSaveSpinner } from '@components';\n\nconst defaultProfilePhoto = '/img/icon/empty-profile.svg';\nconst language = languageHelper.getLanguageCode();\n\n/**\n * We are using ldflex to fetch profile data from a solid pod.\n * ldflex libary is using json-LD for this reason you will see async calls\n * when we want to get a field value, why ? becuase they are expanded the data\n * this means the result will have a better format to read on Javascript.\n * for more information please go to: https://github.com/solid/query-ldflex\n */\ntype Props = { webId: String };\n\nconst Profile = ({ webId }: Props) => {\n  const { t } = useTranslation();\n  const [isLoading, setIsLoading] = useState(false);\n  const [url, setUrl] = useState('');\n\n  const onError = e => {\n    if (e.message.toString().indexOf('Validation failed') < 0) {\n      errorToaster(t('formLanguage.renderer.formNotLoaded'), t('notifications.error'), {\n        label: t('errorFormRender.link.label'),\n        href: t('errorFormRender.link.href')\n      });\n      setIsLoading(false);\n    }\n  };\n\n  const onDelete = () => {\n    successToaster(t('formLanguage.renderer.fieldDeleted'), t('notifications.success'));\n  };\n\n  const onAddNewField = () => {\n    successToaster(t('formLanguage.renderer.fieldAdded'), t('notifications.success'));\n  };\n  function handleUrlChange(event) {\n    event.preventDefault();\n    setUrl(event.target.value);\n  }\n  async function handleSave(event) {\n    event.preventDefault();\n    const result = await SolidAuth.fetch(url, {\n      method: 'PUT',\n      body: 'https://ritvik18.solid.community/public/profile.ttl#',\n      headers: {\n        'Content-Type': 'rdf'\n      }\n    });\n\n    if (result.ok) {\n      successToaster(t('notifications.saved'));\n    } else if (result.ok === false) {\n      errorToaster(t('notifications.errorSaving'));\n    }\n    event.preventDefault();\n    const doc = SolidAuth.fetch(url);\n    doc\n      .then(async response => {\n        \n      })\n      .catch(() => {\n        errorToaster(t('notifications.errorFetching'));\n      });\n      \n  }\n  function handleLoad(event) {\n    event.preventDefault();\n    const doc = SolidAuth.fetch(url);\n    doc\n      .then(async response => {\n        \n      })\n      .catch(() => {\n        errorToaster(t('notifications.errorFetching'));\n      });\n      \n  }\n  return (\n    <ProfileWrapper data-testid=\"profile-component\">\n      <ProfileContainer>\n        {webId && (\n          <Fragment>\n            <Header>\n              <Image\n                {...{\n                  webId,\n                  defaultProfilePhoto\n                }}\n              />\n            </Header>\n\n            <AutoSaveNotification className=\"banner-wrap--warning banner\">\n              <div className=\"banner-wrap__content\">\n                <i className=\"icon fa fa-exclamation-circle\" />\n                {t('profile.autosaveNotification')}\n              </div>\n            </AutoSaveNotification>\n\n            <WebId>\n              <FontAwesomeIcon icon=\"id-card\" />\n              <a href={webId} target=\"_blank\" rel=\"noopener noreferrer\">\n                {webId}\n              </a>\n            </WebId>\n            <FormWrapper>\n            <Label>{t('editor.url')}:<Input type=\"text\" size=\"200\" value={url} onChange={handleUrlChange} /></Label>\n            <Button className=\"ids-link-filled ids-link-filled--primary button\" onClick={handleLoad}>\n            {t('editor.load')}\n          </Button>\n          <Button\n              className=\"ids-link-filled ids-link-filled--secondary button\"\n              onClick={handleSave}\n            >\n              {t('editor.save')}\n            </Button>\n              \n              <FormModel\n                {...{\n                  modelSource: 'https://ritvik18.solid.community/public/profile.ttl#formRoot',\n                  dataSource: url,\n                  viewer: false,\n                  onInit: () => {\n                    setIsLoading(true);\n                  },\n                  onLoaded: () => {\n                    setIsLoading(false);\n                  },\n                  onSuccess: () => {},\n                  onSave: () => {},\n                  onError: error => {\n                    onError(error);\n                  },\n                  onAddNewField: response => onAddNewField(response),\n                  onDelete: response => onDelete(response),\n                  options: {\n                    theme: {\n                      inputText: 'input-wrap',\n                      inputCheckbox: 'sdk-checkbox checkbox',\n                      form: 'inrupt-sdk-form',\n                      childGroup: 'inrupt-form-group',\n                      groupField: 'group-wrapper',\n                      multipleField: 'multiple-wrapper'\n                    },\n                    autosave: true,\n                    autosaveIndicator: AutoSaveSpinner,\n                    language\n                  }\n                }}\n                liveUpdate\n              />\n            </FormWrapper>\n          </Fragment>\n        )}\n        {isLoading && <Loader absolute />}\n      </ProfileContainer>\n    </ProfileWrapper>\n  );\n};\n\nexport default Profile;\n"]},"metadata":{},"sourceType":"module"}