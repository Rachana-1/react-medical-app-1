{"ast":null,"code":"import _regeneratorRuntime from \"D:\\\\Downloads\\\\Test HTML\\\\react-medical-app\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _objectSpread from \"D:\\\\Downloads\\\\Test HTML\\\\react-medical-app\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread\";\nimport _asyncToGenerator from \"D:\\\\Downloads\\\\Test HTML\\\\react-medical-app\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"D:\\\\Downloads\\\\Test HTML\\\\react-medical-app\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"D:\\\\Downloads\\\\Test HTML\\\\react-medical-app\\\\src\\\\containers\\\\FormModel\\\\Renderer\\\\form-renderer.component.js\";\n\n/* eslint-disable no-console */\nimport React, { useCallback, useState } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { FormModel } from '@inrupt/solid-react-components';\nimport { Select, Loader } from \"../../../components/Utils\";\nimport ldflex from '@solid/query-ldflex';\nimport { RendererTypesList, ConverterTypes } from \"../../../constants\";\nimport { successToaster, errorToaster, languageHelper } from \"../../../utils\";\nimport { FormModelContainer, FormWrapper, FormRenderContainer, Form, Input, Result, ResultHeader, Button, ConverterInput } from \"../form-model.style\";\nimport '@inrupt/solid-react-components/build/static/css/index.css';\nimport { AutoSaveSpinner } from \"../../../components\";\n/**\n * Form Model Renderer UI component, containing the styled components for the Form Model Converter\n */\n\nvar FormModelRenderer = function FormModelRenderer() {\n  var _useTranslation = useTranslation(),\n      t = _useTranslation.t;\n\n  var _useState = useState(''),\n      _useState2 = _slicedToArray(_useState, 2),\n      layoutUrl = _useState2[0],\n      setLayoutUrl = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      isLoading = _useState4[0],\n      setIsLoading = _useState4[1];\n\n  var _useState5 = useState(t('formLanguage.extension')),\n      _useState6 = _slicedToArray(_useState5, 2),\n      layoutText = _useState6[0],\n      setLayoutText = _useState6[1];\n\n  var _useState7 = useState(t('formLanguage.formModel')),\n      _useState8 = _slicedToArray(_useState7, 2),\n      shapeText = _useState8[0],\n      setShapeText = _useState8[1];\n\n  var _useState9 = useState(''),\n      _useState10 = _slicedToArray(_useState9, 2),\n      source = _useState10[0],\n      setSource = _useState10[1];\n\n  var _useState11 = useState(''),\n      _useState12 = _slicedToArray(_useState11, 2),\n      schemaUrl = _useState12[0],\n      setSchemaUrl = _useState12[1];\n\n  var _useState13 = useState(null),\n      _useState14 = _slicedToArray(_useState13, 2),\n      submitted = _useState14[0],\n      setSubmitted = _useState14[1];\n\n  var _useState15 = useState(''),\n      _useState16 = _slicedToArray(_useState15, 2),\n      hasLayoutFile = _useState16[0],\n      setHasLayoutFile = _useState16[1];\n\n  var _useState17 = useState(true),\n      _useState18 = _slicedToArray(_useState17, 2),\n      isViewMode = _useState18[0],\n      setViewMode = _useState18[1];\n\n  var filteredOptions = RendererTypesList.filter(function (item) {\n    return t(\"formLanguage.\".concat(item)) === t('formLanguage.formModel');\n  });\n  var optionsList = filteredOptions.map(function (item) {\n    return t(\"formLanguage.\".concat(item));\n  });\n  var language = languageHelper.getLanguageCode();\n  /**\n   * Helper function to detect if choice is ShEx\n   * @param value\n   * @returns {boolean}\n   */\n\n  var isShEx = function isShEx(value) {\n    return value === t(\"formLanguage.\".concat(ConverterTypes.Shex)) || value === t(\"formLanguage.\".concat(ConverterTypes.ShexLayout));\n  };\n  /**\n   * Helper function to detect if choice is SHACL\n   * @param value\n   * @returns {boolean}\n   */\n\n\n  var isShacl = function isShacl(value) {\n    return value === t(\"formLanguage.\".concat(ConverterTypes.Shacl)) || value === t(\"formLanguage.\".concat(ConverterTypes.ShaclExtension));\n  };\n  /**\n   * Helper function to detect if choice has a layout or extension or not\n   * @param value\n   * @returns {boolean}\n   */\n\n\n  var hasLayout = function hasLayout(value) {\n    return value === t(\"formLanguage.\".concat(ConverterTypes.ShaclExtension)) || value === t(\"formLanguage.\".concat(ConverterTypes.ShexLayout));\n  };\n  /**\n   * Change event for the shape/schema URL field\n   */\n\n\n  var onSchemaChange = useCallback(function (e) {\n    setSchemaUrl(e.target.value);\n  });\n  /**\n   * Change event for layout/extension URL field\n   */\n\n  var onLayoutChange = useCallback(function (e) {\n    setLayoutUrl(e.target.value);\n  });\n  /**\n   * Change event for the source\n   */\n\n  var onSourceChange = useCallback(function (e) {\n    setSource(e.target.value);\n  });\n  /**\n   * Submit function for the form, to do the conversion and set up the output\n   * This function is for the view button\n   * Clears the ldflex cache before submission\n   * in case something changed in the pod and not on the generator side,\n   * it will attempt to fetch the file again and not the cached one\n   */\n\n  function onSubmit(_x) {\n    return _onSubmit.apply(this, arguments);\n  }\n  /**\n   * Change event for the input list change, setting up the form conditions\n   */\n\n\n  function _onSubmit() {\n    _onSubmit = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(e) {\n      var obj;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              e.preventDefault();\n              ldflex.clearCache();\n              _context.next = 4;\n              return setSubmitted(null);\n\n            case 4:\n              obj = {};\n              if (schemaUrl !== '') obj = _objectSpread({}, obj, {\n                schemaUrl: schemaUrl\n              });\n              if (source !== '') obj = _objectSpread({}, obj, {\n                source: source\n              });\n              setSubmitted(obj);\n\n            case 8:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n    return _onSubmit.apply(this, arguments);\n  }\n\n  var onListChange = useCallback(function (e) {\n    var newValue = e.target.value; // Set the label for the label or extension field\n\n    if (isShEx(newValue)) {\n      setLayoutText(t('formLanguage.layout'));\n      setShapeText(t('formLanguage.shexShape'));\n    } else if (isShacl(newValue)) {\n      setLayoutText(t('formLanguage.extension'));\n      setShapeText(t('formLanguage.shaclShape'));\n    } else {\n      setLayoutText(t('formLanguage.extension'));\n      setShapeText(t('formLanguage.formModel'));\n    } // Set boolean to disable or enable the layout/extension textbox\n\n\n    setHasLayoutFile(hasLayout(newValue));\n  });\n\n  var _onError = function onError(e) {\n    if (e.message.toString().indexOf('Validation failed') < 0 || e.message.toString().indexOf('Error rendering Form Model') < 0) {\n      errorToaster(t('formLanguage.renderer.formNotLoaded'), t('notifications.error'), {\n        label: t('errorFormRender.link.label'),\n        href: t('errorFormRender.link.href')\n      });\n      setIsLoading(false);\n    }\n  };\n\n  var _onDelete = function onDelete() {\n    successToaster(t('formLanguage.renderer.fieldDeleted'), t('notifications.success'));\n  };\n\n  var _onAddNewField = function onAddNewField() {\n    successToaster(t('formLanguage.renderer.fieldAdded'), t('notifications.success'));\n  };\n\n  return /*#__PURE__*/React.createElement(FormModelContainer, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(FormWrapper, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Form, {\n    onSubmit: onSubmit,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 11\n    }\n  }, t('formLanguage.renderer.title')), /*#__PURE__*/React.createElement(ConverterInput, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"selected-filter\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 13\n    }\n  }, t('formLanguage.input')), /*#__PURE__*/React.createElement(Select, {\n    name: \"selected-filter\",\n    id: \"selected-filter\",\n    options: optionsList,\n    onChange: onListChange,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(ConverterInput, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"converter-input-shape-text\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 13\n    }\n  }, shapeText), /*#__PURE__*/React.createElement(Input, {\n    type: \"text\",\n    placeholder: shapeText,\n    name: \"converter-input-shape-text\",\n    id: \"converter-input-shape-text\",\n    onChange: onSchemaChange,\n    value: schemaUrl,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(ConverterInput, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"layout-input\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 13\n    }\n  }, layoutText), /*#__PURE__*/React.createElement(Input, {\n    type: \"text\",\n    placeholder: layoutText,\n    onChange: onLayoutChange,\n    disabled: !hasLayoutFile,\n    value: layoutUrl,\n    name: \"layout-input\",\n    id: \"layout-input\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 181,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(ConverterInput, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 191,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"converter-input-form-language\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 192,\n      columnNumber: 13\n    }\n  }, t('formLanguage.source')), /*#__PURE__*/React.createElement(Input, {\n    type: \"text\",\n    placeholder: t('formLanguage.source'),\n    name: \"converter-input-form-language\",\n    id: \"converter-input-form-language\",\n    onChange: onSourceChange,\n    value: source,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 193,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(Button, {\n    type: \"submit\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 202,\n      columnNumber: 11\n    }\n  }, t('formLanguage.renderer.submitBtn'))), /*#__PURE__*/React.createElement(Result, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 204,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(ResultHeader, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 205,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"h4\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 206,\n      columnNumber: 13\n    }\n  }, t('formLanguage.formModel')), /*#__PURE__*/React.createElement(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 207,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    type: \"button\",\n    className: isViewMode ? 'active' : '',\n    onClick: function onClick() {\n      return setViewMode(true);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 208,\n      columnNumber: 15\n    }\n  }, t('formLanguage.renderer.viewBtn')), /*#__PURE__*/React.createElement(Button, {\n    type: \"button\",\n    className: !isViewMode ? 'active' : '',\n    onClick: function onClick() {\n      return setViewMode(false);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 215,\n      columnNumber: 15\n    }\n  }, t('formLanguage.renderer.editBtn'))))), /*#__PURE__*/React.createElement(FormRenderContainer, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 225,\n      columnNumber: 9\n    }\n  }, submitted !== null && /*#__PURE__*/React.createElement(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 227,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(FormModel, Object.assign({\n    modelSource: submitted.schemaUrl,\n    dataSource: submitted && submitted.source || '',\n    onInit: function onInit() {\n      return setIsLoading(true);\n    },\n    onLoaded: function onLoaded() {\n      return setIsLoading(false);\n    },\n    onSuccess: function onSuccess() {},\n    onSave: function onSave() {},\n    onError: function onError(error) {\n      _onError(error);\n    },\n    onAddNewField: function onAddNewField(response) {\n      return _onAddNewField(response);\n    },\n    onDelete: function onDelete(response) {\n      return _onDelete(response);\n    },\n    options: {\n      theme: {\n        form: 'inrupt-sdk-form',\n        inputText: 'input-wrap',\n        inputCheckbox: 'sdk-checkbox checkbox',\n        singleLine: 'input-wrap',\n        integerField: 'input-wrap',\n        decimalInput: 'input-wrap',\n        floatField: 'input-wrap',\n        checkboxField: 'input-wrap',\n        groupField: 'group-wrapper',\n        multipleField: 'multiple-wrapper'\n      },\n      autosaveIndicator: AutoSaveSpinner,\n      autosave: true,\n      viewer: isViewMode,\n      language: language\n    }\n  }, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 228,\n      columnNumber: 15\n    }\n  })))), isLoading && /*#__PURE__*/React.createElement(Loader, {\n    absolute: true,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 264,\n      columnNumber: 23\n    }\n  })));\n};\n\nexport default FormModelRenderer;","map":{"version":3,"sources":["D:/Downloads/Test HTML/react-medical-app/src/containers/FormModel/Renderer/form-renderer.component.js"],"names":["React","useCallback","useState","useTranslation","FormModel","Select","Loader","ldflex","RendererTypesList","ConverterTypes","successToaster","errorToaster","languageHelper","FormModelContainer","FormWrapper","FormRenderContainer","Form","Input","Result","ResultHeader","Button","ConverterInput","AutoSaveSpinner","FormModelRenderer","t","layoutUrl","setLayoutUrl","isLoading","setIsLoading","layoutText","setLayoutText","shapeText","setShapeText","source","setSource","schemaUrl","setSchemaUrl","submitted","setSubmitted","hasLayoutFile","setHasLayoutFile","isViewMode","setViewMode","filteredOptions","filter","item","optionsList","map","language","getLanguageCode","isShEx","value","Shex","ShexLayout","isShacl","Shacl","ShaclExtension","hasLayout","onSchemaChange","e","target","onLayoutChange","onSourceChange","onSubmit","preventDefault","clearCache","obj","onListChange","newValue","onError","message","toString","indexOf","label","href","onDelete","onAddNewField","modelSource","dataSource","onInit","onLoaded","onSuccess","onSave","error","response","options","theme","form","inputText","inputCheckbox","singleLine","integerField","decimalInput","floatField","checkboxField","groupField","multipleField","autosaveIndicator","autosave","viewer"],"mappings":"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","sourcesContent":["/* eslint-disable no-console */\nimport React, { useCallback, useState } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { FormModel } from '@inrupt/solid-react-components';\nimport { Select, Loader } from '@util-components';\nimport ldflex from '@solid/query-ldflex';\n\nimport { RendererTypesList, ConverterTypes } from '@constants';\nimport { successToaster, errorToaster, languageHelper } from '@utils';\nimport {\n  FormModelContainer,\n  FormWrapper,\n  FormRenderContainer,\n  Form,\n  Input,\n  Result,\n  ResultHeader,\n  Button,\n  ConverterInput\n} from '../form-model.style';\n\nimport '@inrupt/solid-react-components/build/static/css/index.css';\nimport { AutoSaveSpinner } from '@components';\n\n/**\n * Form Model Renderer UI component, containing the styled components for the Form Model Converter\n */\nconst FormModelRenderer = () => {\n  const { t } = useTranslation();\n  const [layoutUrl, setLayoutUrl] = useState('');\n  const [isLoading, setIsLoading] = useState(false);\n  const [layoutText, setLayoutText] = useState(t('formLanguage.extension'));\n  const [shapeText, setShapeText] = useState(t('formLanguage.formModel'));\n  const [source, setSource] = useState('');\n  const [schemaUrl, setSchemaUrl] = useState('');\n  const [submitted, setSubmitted] = useState(null);\n  const [hasLayoutFile, setHasLayoutFile] = useState('');\n  const [isViewMode, setViewMode] = useState(true);\n\n  const filteredOptions = RendererTypesList.filter(\n    item => t(`formLanguage.${item}`) === t('formLanguage.formModel')\n  );\n  const optionsList = filteredOptions.map(item => t(`formLanguage.${item}`));\n  const language = languageHelper.getLanguageCode();\n\n  /**\n   * Helper function to detect if choice is ShEx\n   * @param value\n   * @returns {boolean}\n   */\n  const isShEx = value =>\n    value === t(`formLanguage.${ConverterTypes.Shex}`) ||\n    value === t(`formLanguage.${ConverterTypes.ShexLayout}`);\n\n  /**\n   * Helper function to detect if choice is SHACL\n   * @param value\n   * @returns {boolean}\n   */\n  const isShacl = value =>\n    value === t(`formLanguage.${ConverterTypes.Shacl}`) ||\n    value === t(`formLanguage.${ConverterTypes.ShaclExtension}`);\n\n  /**\n   * Helper function to detect if choice has a layout or extension or not\n   * @param value\n   * @returns {boolean}\n   */\n  const hasLayout = value =>\n    value === t(`formLanguage.${ConverterTypes.ShaclExtension}`) ||\n    value === t(`formLanguage.${ConverterTypes.ShexLayout}`);\n\n  /**\n   * Change event for the shape/schema URL field\n   */\n  const onSchemaChange = useCallback((e: Event) => {\n    setSchemaUrl(e.target.value);\n  });\n\n  /**\n   * Change event for layout/extension URL field\n   */\n  const onLayoutChange = useCallback((e: Event) => {\n    setLayoutUrl(e.target.value);\n  });\n\n  /**\n   * Change event for the source\n   */\n  const onSourceChange = useCallback((e: Event) => {\n    setSource(e.target.value);\n  });\n\n  /**\n   * Submit function for the form, to do the conversion and set up the output\n   * This function is for the view button\n   * Clears the ldflex cache before submission\n   * in case something changed in the pod and not on the generator side,\n   * it will attempt to fetch the file again and not the cached one\n   */\n  async function onSubmit(e: Event) {\n    e.preventDefault();\n    ldflex.clearCache();\n    await setSubmitted(null);\n    let obj = {};\n    if (schemaUrl !== '') obj = { ...obj, schemaUrl };\n    if (source !== '') obj = { ...obj, source };\n    setSubmitted(obj);\n  }\n\n  /**\n   * Change event for the input list change, setting up the form conditions\n   */\n  const onListChange = useCallback((e: Event) => {\n    const newValue = e.target.value;\n\n    // Set the label for the label or extension field\n    if (isShEx(newValue)) {\n      setLayoutText(t('formLanguage.layout'));\n      setShapeText(t('formLanguage.shexShape'));\n    } else if (isShacl(newValue)) {\n      setLayoutText(t('formLanguage.extension'));\n      setShapeText(t('formLanguage.shaclShape'));\n    } else {\n      setLayoutText(t('formLanguage.extension'));\n      setShapeText(t('formLanguage.formModel'));\n    }\n\n    // Set boolean to disable or enable the layout/extension textbox\n    setHasLayoutFile(hasLayout(newValue));\n  });\n\n  const onError = e => {\n    if (\n      e.message.toString().indexOf('Validation failed') < 0 ||\n      e.message.toString().indexOf('Error rendering Form Model') < 0\n    ) {\n      errorToaster(t('formLanguage.renderer.formNotLoaded'), t('notifications.error'), {\n        label: t('errorFormRender.link.label'),\n        href: t('errorFormRender.link.href')\n      });\n      setIsLoading(false);\n    }\n  };\n\n  const onDelete = () => {\n    successToaster(t('formLanguage.renderer.fieldDeleted'), t('notifications.success'));\n  };\n\n  const onAddNewField = () => {\n    successToaster(t('formLanguage.renderer.fieldAdded'), t('notifications.success'));\n  };\n\n  return (\n    <FormModelContainer>\n      <FormWrapper>\n        <Form onSubmit={onSubmit}>\n          <h3>{t('formLanguage.renderer.title')}</h3>\n          <ConverterInput>\n            <label htmlFor=\"selected-filter\">{t('formLanguage.input')}</label>\n            <Select\n              name=\"selected-filter\"\n              id=\"selected-filter\"\n              options={optionsList}\n              onChange={onListChange}\n            />\n          </ConverterInput>\n          <ConverterInput>\n            <label htmlFor=\"converter-input-shape-text\">{shapeText}</label>\n            <Input\n              type=\"text\"\n              placeholder={shapeText}\n              name=\"converter-input-shape-text\"\n              id=\"converter-input-shape-text\"\n              onChange={onSchemaChange}\n              value={schemaUrl}\n            />\n          </ConverterInput>\n          <ConverterInput>\n            <label htmlFor=\"layout-input\">{layoutText}</label>\n            <Input\n              type=\"text\"\n              placeholder={layoutText}\n              onChange={onLayoutChange}\n              disabled={!hasLayoutFile}\n              value={layoutUrl}\n              name=\"layout-input\"\n              id=\"layout-input\"\n            />\n          </ConverterInput>\n          <ConverterInput>\n            <label htmlFor=\"converter-input-form-language\">{t('formLanguage.source')}</label>\n            <Input\n              type=\"text\"\n              placeholder={t('formLanguage.source')}\n              name=\"converter-input-form-language\"\n              id=\"converter-input-form-language\"\n              onChange={onSourceChange}\n              value={source}\n            />\n          </ConverterInput>\n          <Button type=\"submit\">{t('formLanguage.renderer.submitBtn')}</Button>\n        </Form>\n        <Result>\n          <ResultHeader>\n            <h4>{t('formLanguage.formModel')}</h4>\n            <div>\n              <Button\n                type=\"button\"\n                className={isViewMode ? 'active' : ''}\n                onClick={() => setViewMode(true)}\n              >\n                {t('formLanguage.renderer.viewBtn')}\n              </Button>\n              <Button\n                type=\"button\"\n                className={!isViewMode ? 'active' : ''}\n                onClick={() => setViewMode(false)}\n              >\n                {t('formLanguage.renderer.editBtn')}\n              </Button>\n            </div>\n          </ResultHeader>\n        </Result>\n        <FormRenderContainer>\n          {submitted !== null && (\n            <div>\n              <FormModel\n                {...{\n                  modelSource: submitted.schemaUrl,\n                  dataSource: (submitted && submitted.source) || '',\n                  onInit: () => setIsLoading(true),\n                  onLoaded: () => setIsLoading(false),\n                  onSuccess: () => {},\n                  onSave: () => {},\n                  onError: error => {\n                    onError(error);\n                  },\n                  onAddNewField: response => onAddNewField(response),\n                  onDelete: response => onDelete(response),\n                  options: {\n                    theme: {\n                      form: 'inrupt-sdk-form',\n                      inputText: 'input-wrap',\n                      inputCheckbox: 'sdk-checkbox checkbox',\n                      singleLine: 'input-wrap',\n                      integerField: 'input-wrap',\n                      decimalInput: 'input-wrap',\n                      floatField: 'input-wrap',\n                      checkboxField: 'input-wrap',\n                      groupField: 'group-wrapper',\n                      multipleField: 'multiple-wrapper'\n                    },\n                    autosaveIndicator: AutoSaveSpinner,\n                    autosave: true,\n                    viewer: isViewMode,\n                    language\n                  }\n                }}\n              />\n            </div>\n          )}\n        </FormRenderContainer>\n        {isLoading && <Loader absolute />}\n      </FormWrapper>\n    </FormModelContainer>\n  );\n};\n\nexport default FormModelRenderer;\n"]},"metadata":{},"sourceType":"module"}